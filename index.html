<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√∂pp√§ys - Helader√≠a Gourmet</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        .font-playfair { font-family: 'Playfair Display', serif; }
        .font-inter { font-family: 'Inter', sans-serif; }
        .category-cremosos { background: linear-gradient(135deg, #FE6B01 0%, #ff8533 100%); }
        .category-frutales { background: linear-gradient(135deg, #4CAF50 0%, #81C784 100%); border: 3px solid #388E3C; }
        .item-card:hover { transform: translateY(-2px); }
        .order-summary { position: sticky; top: 2rem; max-height: calc(100vh - 4rem); overflow-y: auto; }
        .brand-accent { color: #FE6B01; }
        .bg-brand-primary { background-color: #FE6B01; }
        .ice-cream-shape { width: 20px; height: 20px; border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%; display: inline-block; }
        @keyframes bounce-slow { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .animate-promo { animation: bounce-slow 2s infinite; }
    </style>
</head>
<body class="bg-gradient-to-br from-orange-50 to-yellow-50 font-inter">
    <div class="min-h-screen">
        <header class="bg-white shadow-sm border-b-4 border-brand-primary">
            <div id="header-container" class="max-w-7xl mx-auto px-4 py-8">
                <h1 class="text-6xl font-black text-center text-white" style="font-family: Arial, sans-serif; background: linear-gradient(45deg, #FE6B01, #ff8533); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); font-weight: 900;">T√∂pp√§ys</h1>
                <p class="text-center text-orange-800 mt-3 font-medium text-lg">Helader√≠a Gourmet ‚Ä¢ Experiencia √önica</p>
                <p class="text-center brand-accent mt-2 font-bold text-xl">üìû 0412-9843410</p>
                <div class="mt-4 text-center">
                    <p class="text-orange-700 text-sm font-medium bg-orange-50 inline-block px-4 py-2 rounded-full border border-orange-200">
                        üí∞ 10% descuento en pedidos de 5+ helados ‚Ä¢ Solo contado
                    </p>
                </div>
            </div>
        </header>

        <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <section class="mb-12">
                        <div class="category-cremosos rounded-xl p-8 mb-6 shadow-lg">
                            <h2 class="font-playfair text-4xl font-semibold text-white mb-3">üç¶ Helados Cremosos</h2>
                            <p class="text-orange-100">Sabores intensos y texturas artesanales</p>
                        </div>
                        <div id="cremosos-menu" class="grid gap-6"></div>
                    </section>
                    <section class="mb-12">
                        <div class="category-frutales rounded-xl p-8 mb-6 shadow-lg">
                            <h2 class="font-playfair text-4xl font-semibold text-white mb-3">üçì Helados Frutales</h2>
                            <p class="text-green-100">Refrescantes, hechos con fruta real ($0.30)</p>
                        </div>
                        <div id="frutales-menu" class="grid gap-6"></div>
                    </section>
                </div>

                <div class="lg:col-span-1">
                    <div class="order-summary bg-white rounded-xl shadow-xl border border-gray-100 p-8">
                        <h3 class="font-playfair text-3xl font-semibold brand-accent mb-6">Tu Pedido</h3>
                        <div class="mb-8 p-4 bg-gray-50 rounded-xl border-2 border-orange-100">
                            <h4 class="font-semibold text-gray-800 mb-4">üöö M√©todo de Entrega</h4>
                            <div class="grid grid-cols-2 gap-3">
                                <button id="pickup-btn" class="delivery-option p-4 rounded-lg border-2 border-gray-200 bg-white" onclick="selectDeliveryMethod('pickup')">üè™ Pick Up</button>
                                <button id="delivery-btn" class="delivery-option p-4 rounded-lg border-2 border-gray-200 bg-white" onclick="selectDeliveryMethod('delivery')">üöö Delivery</button>
                            </div>
                        </div>
                        <div id="order-items" class="space-y-4 mb-8"></div>
                        <div class="border-t border-gray-200 pt-6">
                            <div class="flex justify-between items-center text-2xl font-bold mb-6">
                                <span class="text-gray-800">Total:</span>
                                <span id="total-price" class="brand-accent">$0.00</span>
                            </div>
                            <button id="whatsapp-btn" class="w-full bg-green-500 text-white font-bold py-4 rounded-xl shadow-lg disabled:opacity-50" onclick="sendWhatsAppOrder()" disabled>Enviar Pedido WhatsApp</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==========================================
        // üöÄ MODO PROMOCI√ìN (Cambia a true los martes)
        const esMartesDePromo = true; 
        // ==========================================

        let order = {};
        let selectedDeliveryMethod = 'pickup';
        const bcvRate = 36.50; 

        const inventory = {
            cremosos: {
                samba: { name: 'Samba de Fresa', description: 'Cremosidad de fresa, trozos de galleta y chocolate. Todo lo que amas de la Samba, ahora en una T√∂pp√§ys."', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-red-600 to-amber-900' },
                oreo: { name: 'Oreo', description: 'Cremoso helado con trozos de galleta Oreo, perfecto equilibrio entre dulce y crujiente', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-gray-700 to-gray-900' },
                cappuoreo: { name: 'Cappu-Oreo', description: 'Fusi√≥n perfecta de caf√© espresso y galleta Oreo', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-[#2D1300] to-[#1A0D00]' },
                pielimon: { name: 'Pie de Lim√≥n', description: 'Delicioso sabor a pie de lim√≥n con notas c√≠tricas refrescantes y cremosidad √∫nica', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-[#B2EF5B] to-[#9CDA48]' },
                pieparchita: { name: 'Pie de Parchita', description: 'Ex√≥tico sabor tropical de parchita en textura cremosa, una experiencia gourmet √∫nica', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-orange-400 to-orange-600' },
                chocolate: { name: 'Chocolate', description: 'Cl√°sico helado de chocolate, hecho con cacao. Intenso y cremoso.', price: 1.20, stock: 14, shapeColor: 'bg-gradient-to-b from-amber-800 to-amber-900' },
                arequipe: { name: 'Arequipe', description: 'Dulce y cremoso sabor a arequipe, con notas acarameladas que te encantar√°n', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-amber-600 to-amber-800' },
                cocada: { name: 'Cocada', description: 'Cremoso helado de coco, refrescante y con un toque tropical', price: 1.20, stock: 16, shapeColor: 'bg-gradient-to-b from-white to-sky-100' },
                colitaleche: { name: 'Colita con Leche', description: 'El sabor nost√°lgico de la Colita venezolana, cremosa y dulce', price: 1.20, stock: 10, shapeColor: 'bg-gradient-to-b from-red-300 to-pink-500' },
                ponchecrema: { name: 'Ponche Crema', description: 'El cl√°sico sabor navide√±o venezolano, cremoso y con notas de ron (contiene alcohol)', price: 1.50, stock: 10, shapeColor: 'bg-gradient-to-b from-[#FFFDD0] to-[#FFFD99]' }
            },
            frutales: {
                parchita: { name: 'Parchita', description: 'Frutal c√≠trico y refrescante', price: 0.30, stock: 10, shapeColor: 'bg-gradient-to-b from-yellow-400 to-orange-500' },
                jobito: { name: 'Jobito', description: 'Sabor t√≠pico dulce y √°cido del jobito', price: 0.30, stock: 10, shapeColor: 'bg-gradient-to-b from-yellow-500 to-lime-600' }
            }
        };

        function renderPromoBanner() {
            if (esMartesDePromo) {
                const header = document.getElementById('header-container');
                const banner = document.createElement('div');
                banner.className = 'mt-4 animate-promo text-center';
                banner.innerHTML = `<span class="bg-red-600 text-white text-sm font-bold px-6 py-2 rounded-full shadow-lg border-2 border-white">üî• ¬°MARTES DE PRIMO PROMO! Pie Lim√≥n + Pie Parchita = $2.10</span>`;
                header.appendChild(banner);
            }
        }

        function renderMenu() {
            const cremososCont = document.getElementById('cremosos-menu');
            const frutalesCont = document.getElementById('frutales-menu');
            const createCard = (id, item) => `
                <div class="item-card bg-white rounded-xl shadow p-6 border border-gray-100">
                    <div class="flex justify-between mb-2">
                        <h3 class="font-playfair text-xl font-bold">${item.name}</h3>
                        <span class="brand-accent font-bold">$${item.price.toFixed(2)}</span>
                    </div>
                    <p class="text-gray-500 text-sm mb-4">${item.description}</p>
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-3">
                            <button class="bg-gray-200 px-3 py-1 rounded-full font-bold" onclick="updateQuantity('${id}', -1)">-</button>
                            <span id="${id}-qty" class="font-bold">0</span>
                            <button class="bg-brand-primary text-white px-3 py-1 rounded-full font-bold" onclick="updateQuantity('${id}', 1)">+</button>
                        </div>
                        <div class="ice-cream-shape ${item.shapeColor}"></div>
                    </div>
                </div>`;
            cremososCont.innerHTML = Object.entries(inventory.cremosos).filter(i => i[1].stock > 1).map(i => createCard(i[0], i[1])).join('');
            frutalesCont.innerHTML = Object.entries(inventory.frutales).filter(i => i[1].stock > 1).map(i => createCard(i[0], i[1])).join('');
        }

        function updateQuantity(id, change) {
            if (!order[id]) order[id] = { quantity: 0 };
            order[id].quantity = Math.max(0, order[id].quantity + change);
            if (order[id].quantity === 0) delete order[id];
            document.getElementById(id + '-qty').textContent = order[id] ? order[id].quantity : 0;
            updateOrderSummary();
        }

        function selectDeliveryMethod(method) {
            selectedDeliveryMethod = method;
            document.querySelectorAll('.delivery-option').forEach(b => b.classList.remove('border-brand-primary', 'bg-orange-50'));
            document.getElementById(method + '-btn').classList.add('border-brand-primary', 'bg-orange-50');
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const container = document.getElementById('order-items');
            if (Object.keys(order).length === 0) {
                container.innerHTML = `<p class="text-center text-gray-400 py-8">Tu carrito est√° vac√≠o</p>`;
                document.getElementById('total-price').textContent = '$0.00';
                document.getElementById('whatsapp-btn').disabled = true;
                return;
            }
            let totalOriginal = 0;
            let totalQuantity = 0;
            let html = '';
            for (const [id, item] of Object.entries(order)) {
                const data = inventory.cremosos[id] || inventory.frutales[id];
                const sub = data.price * item.quantity;
                totalOriginal += sub;
                totalQuantity += item.quantity;
                html += `<div class="flex justify-between text-sm"><span>${data.name} x${item.quantity}</span><span class="font-bold">$${sub.toFixed(2)}</span></div>`;
            }
            let descuentoPromo = 0;
            if (esMartesDePromo) {
                const cantLimon = order['pielimon']?.quantity || 0;
                const cantParchita = order['pieparchita']?.quantity || 0;
                const numCombos = Math.min(cantLimon, cantParchita);
                if (numCombos > 0) {
                    descuentoPromo = numCombos * 0.30;
                    html += `<div class="text-green-600 text-xs font-bold mt-2">‚ú® Primo Promo: -$${descuentoPromo.toFixed(2)}</div>`;
                }
            }
            let finalTotal = (totalOriginal - descuentoPromo);
            if (totalQuantity >= 5) {
                finalTotal *= 0.90;
                html += `<div class="text-blue-600 text-xs font-bold">üéâ Descuento 10% por volumen</div>`;
            }
            container.innerHTML = html;
            document.getElementById('total-price').textContent = `$${finalTotal.toFixed(2)} / ${(finalTotal * bcvRate).toFixed(2)} Bs`;
            document.getElementById('whatsapp-btn').disabled = false;
        }

        function sendWhatsAppOrder() {
            let message = "*NUEVO PEDIDO TOPPAYS*\n\n";
            message += `*Entrega:* ${selectedDeliveryMethod.toUpperCase()}\n\n`;
            let total = 0;
            let totalQty = 0;
            for (const [id, item] of Object.entries(order)) {
                const data = inventory.cremosos[id] || inventory.frutales[id];
                message += `‚Ä¢ ${data.name} x${item.quantity} ($${(data.price * item.quantity).toFixed(2)})\n`;
                total += data.price * item.quantity;
                totalQty += item.quantity;
            }
            if (esMartesDePromo) {
                const numCombos = Math.min(order['pielimon']?.quantity || 0, order['pieparchita']?.quantity || 0);
                if (numCombos > 0) {
                    total -= (numCombos * 0.30);
                    message += `\nüéÅ *Martes de Primo Promo aplicada!*`;
                }
            }
            if (totalQty >= 5) total *= 0.90;
            message += `\n\n*TOTAL: $${total.toFixed(2)} / ${(total * bcvRate).toFixed(2)} Bs*`;
            message += `\n\n*Pago M√≥vil:*\nCI: 28134317\nMercantil (0105)\n04248172692`;
            window.location.href = `https://wa.me/584129843410?text=${encodeURIComponent(message)}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            renderPromoBanner();
            selectDeliveryMethod('pickup');
        });
    </script>
</body>
</html>
